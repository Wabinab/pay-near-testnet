"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4189],{94189:(Pe,T,_)=>{_.r(T),_.d(T,{Tab1PageModule:()=>Te});var f=_(11929),P=_(96814),m=_(60095),M=_(23554),Z=_(96116),b=_(15861),E=_(66588),L=_(22832),J=_(74825),t=_(85678),x=_(28251),z=_(6593);const F=["qrcElement"];let q=(()=>{var n;class i{constructor(e,o){this.renderer=e,this.sanitizer=o,this.allowEmptyString=!1,this.colorDark="#000000ff",this.colorLight="#ffffffff",this.cssClass="qrcode",this.elementType="canvas",this.errorCorrectionLevel="M",this.margin=4,this.qrdata="",this.scale=4,this.width=10,this.qrCodeURL=new t.vpe,this.context=null}ngOnChanges(){var e=this;return(0,b.Z)(function*(){yield e.createQRCode()})()}isValidQrCodeText(e){return!1===this.allowEmptyString?!(typeof e>"u"||""===e||"null"===e||null===e):!(typeof e>"u")}toDataURL(e){return new Promise((o,c)=>{(0,x.toDataURL)(this.qrdata,e,(a,l)=>{a?c(a):o(l)})})}toCanvas(e,o){return new Promise((c,a)=>{(0,x.toCanvas)(e,this.qrdata,o,l=>{l?a(l):c("success")})})}toSVG(e){return new Promise((o,c)=>{(0,x.toString)(this.qrdata,e,(a,l)=>{a?c(a):o(l)})})}renderElement(e){for(const o of this.qrcElement.nativeElement.childNodes)this.renderer.removeChild(this.qrcElement.nativeElement,o);this.renderer.appendChild(this.qrcElement.nativeElement,e)}createQRCode(){var e=this;return(0,b.Z)(function*(){e.version&&e.version>40?(console.warn("[angularx-qrcode] max value for `version` is 40"),e.version=40):e.version&&e.version<1?(console.warn("[angularx-qrcode]`min value for `version` is 1"),e.version=1):void 0!==e.version&&isNaN(e.version)&&(console.warn("[angularx-qrcode] version should be a number, defaulting to auto."),e.version=void 0);try{if(!e.isValidQrCodeText(e.qrdata))throw new Error("[angularx-qrcode] Field `qrdata` is empty, set 'allowEmptyString=\"true\"' to overwrite this behaviour.");e.isValidQrCodeText(e.qrdata)&&""===e.qrdata&&(e.qrdata=" ");const o={color:{dark:e.colorDark,light:e.colorLight},errorCorrectionLevel:e.errorCorrectionLevel,margin:e.margin,scale:e.scale,version:e.version,width:e.width},c=e.imageSrc,a=e.imageHeight||40,l=e.imageWidth||40;switch(e.elementType){case"canvas":{const s=e.renderer.createElement("canvas");e.context=s.getContext("2d"),e.toCanvas(s,o).then(()=>{if(e.ariaLabel&&e.renderer.setAttribute(s,"aria-label",`${e.ariaLabel}`),e.title&&e.renderer.setAttribute(s,"title",`${e.title}`),c&&e.context){e.centerImage=new Image(l,a),c!==e.centerImage.src&&(e.centerImage.src=c),a!==e.centerImage.height&&(e.centerImage.height=a),l!==e.centerImage.width&&(e.centerImage.width=l);const u=e.centerImage;u&&(u.onload=()=>{var d;null===(d=e.context)||void 0===d||d.drawImage(u,s.width/2-l/2,s.height/2-a/2,l,a)})}e.renderElement(s),e.emitQRCodeURL(s)}).catch(u=>{console.error("[angularx-qrcode] canvas error:",u)});break}case"svg":{const s=e.renderer.createElement("div");e.toSVG(o).then(u=>{e.renderer.setProperty(s,"innerHTML",u);const d=s.firstChild;e.renderer.setAttribute(d,"height",`${e.width}`),e.renderer.setAttribute(d,"width",`${e.width}`),e.renderElement(d),e.emitQRCodeURL(d)}).catch(u=>{console.error("[angularx-qrcode] svg error:",u)});break}default:{const s=e.renderer.createElement("img");e.toDataURL(o).then(u=>{e.alt&&s.setAttribute("alt",e.alt),e.ariaLabel&&s.setAttribute("aria-label",e.ariaLabel),s.setAttribute("src",u),e.title&&s.setAttribute("title",e.title),e.renderElement(s),e.emitQRCodeURL(s)}).catch(u=>{console.error("[angularx-qrcode] img/url error:",u)})}}}catch(o){console.error("[angularx-qrcode] Error generating QR Code:",o.message)}})()}emitQRCodeURL(e){const o=e.constructor.name;if(o===SVGSVGElement.name){const l=new Blob([e.outerHTML],{type:"image/svg+xml"}),s=URL.createObjectURL(l),u=this.sanitizer.bypassSecurityTrustUrl(s);return void this.qrCodeURL.emit(u)}let c="";o===HTMLCanvasElement.name&&(c=e.toDataURL("image/png")),o===HTMLImageElement.name&&(c=e.src),fetch(c).then(a=>a.blob()).then(a=>URL.createObjectURL(a)).then(a=>this.sanitizer.bypassSecurityTrustUrl(a)).then(a=>{this.qrCodeURL.emit(a)}).catch(a=>{console.error("[angularx-qrcode] Error when fetching image/png URL: "+a)})}}return(n=i).\u0275fac=function(e){return new(e||n)(t.Y36(t.Qsj),t.Y36(z.H7))},n.\u0275cmp=t.Xpm({type:n,selectors:[["qrcode"]],viewQuery:function(e,o){if(1&e&&t.Gf(F,7),2&e){let c;t.iGM(c=t.CRH())&&(o.qrcElement=c.first)}},inputs:{allowEmptyString:"allowEmptyString",colorDark:"colorDark",colorLight:"colorLight",cssClass:"cssClass",elementType:"elementType",errorCorrectionLevel:"errorCorrectionLevel",imageSrc:"imageSrc",imageHeight:"imageHeight",imageWidth:"imageWidth",margin:"margin",qrdata:"qrdata",scale:"scale",version:"version",width:"width",alt:"alt",ariaLabel:"ariaLabel",title:"title"},outputs:{qrCodeURL:"qrCodeURL"},features:[t.TTD],decls:2,vars:2,consts:[["qrcElement",""]],template:function(e,o){1&e&&t._UZ(0,"div",null,0),2&e&&t.Tol(o.cssClass)},encapsulation:2,changeDetection:0}),i})(),B=(()=>{var n;class i{}return(n=i).\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({}),i})(),$=(()=>{var n;class i{constructor(e){this.modalCtrl=e}ngOnInit(){}get width(){return Math.round(.95*window.innerWidth)}}return(n=i).\u0275fac=function(e){return new(e||n)(t.Y36(f.IN))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-qrcode-modal"]],decls:4,vars:4,consts:[[1,"backdrop-color"],[3,"visible"],[1,"container-center"],[3,"qrdata","elementType","width"]],template:function(e,o){1&e&&(t.TgZ(0,"ion-content",0),t._UZ(1,"ion-backdrop",1),t.TgZ(2,"div",2),t._UZ(3,"qrcode",3),t.qZA()()),2&e&&(t.xp6(1),t.Q6J("visible",!0),t.xp6(2),t.Q6J("qrdata",o.qr_data)("elementType","img")("width",o.width))},dependencies:[f.ql,f.W2,q],styles:["ion-content[_ngcontent-%COMP%]{--background: #bebfc1 !important}"]}),i})();var D=_(63891),C=_(97582),H=_(65592),Y=_(92438),W={error:"cordova_not_available"},O={error:"plugin_not_installed"};function w(n){if(typeof window<"u"&&window.angular){var r=window.document,e=window.angular.element(r.querySelector("[ng-app]")||r.body).injector();if(e)return e.get("$q")(function(c,a){n(c,a)});console.warn("Angular 1 was detected but $q couldn't be retrieved. This is usually when the app is not bootstrapped on the html or body tag. Falling back to native promises which won't trigger an automatic digest when promises resolve.")}return function(){if(Promise)return new Promise(function(c,a){n(c,a)});console.error("No Promise support or polyfill found. To enable Ionic Native support, please add the es6-promise polyfill before this script, or run with a library like Angular or on a recent browser.")}()}function I(n,i,r){var e,o,c;return"string"==typeof n?e=n:(e=n.constructor.getPluginRef(),r=n.constructor.getPluginName(),c=n.constructor.getPluginInstallName()),!(!(o=R(e))||i&&typeof o[i]>"u")||(typeof window>"u"||!window.cordova?(function ne(n,i){typeof process>"u"&&console.warn(i?"Native: tried calling "+n+"."+i+", but Cordova is not available. Make sure to include cordova.js or run in a device/simulator":"Native: tried accessing the "+n+" plugin but Cordova is not available. Make sure to include cordova.js or run in a device/simulator")}(r,i),W):(function te(n,i,r){console.warn(r?"Native: tried calling "+n+"."+r+", but the "+n+" plugin is not installed.":"Native: tried accessing the "+n+" plugin but it's not installed."),i&&console.warn("Install the "+n+" plugin: 'ionic cordova plugin add "+i+"'")}(r,c,i),O))}function v(n,i,r,e,o,c){void 0===e&&(e={}),r=function A(n,i,r,e){if(void 0===i&&(i={}),i.sync)return n;if("reverse"===i.callbackOrder)n.unshift(e),n.unshift(r);else if("node"===i.callbackStyle)n.push(function(l,s){l?e(l):r(s)});else if("object"===i.callbackStyle&&i.successName&&i.errorName){var o={};o[i.successName]=r,o[i.errorName]=e,n.push(o)}else if(typeof i.successIndex<"u"||typeof i.errorIndex<"u"){var c=function(){i.successIndex>n.length?n[i.successIndex]=r:n.splice(i.successIndex,0,r)},a=function(){i.errorIndex>n.length?n[i.errorIndex]=e:n.splice(i.errorIndex,0,e)};i.successIndex>i.errorIndex?(a(),c()):(c(),a())}else n.push(r),n.push(e);return n}(r,e,o,c);var a=I(n,i);if(!0===a){var l=R(n.constructor.getPluginRef());return l[i].apply(l,r)}return a}function R(n){return typeof window<"u"?U(window,n):null}function U(n,i){for(var r=i.split("."),e=n,o=0;o<r.length;o++){if(!e)return null;e=e[r[o]]}return e}var k=function(){function n(){}return n.installed=function(){return!0===I(this.pluginRef)},n.getPlugin=function(){return typeof window<"u"?function ie(n,i){for(var r=i.split("."),e=n,o=0;o<r.length;o++){if(!e)return null;e=e[r[o]]}return e}(window,this.pluginRef):null},n.getPluginName=function(){return this.pluginName},n.getPluginRef=function(){return this.pluginRef},n.getPluginInstallName=function(){return this.plugin},n.getSupportedPlatforms=function(){return this.platforms},n.pluginName="",n.pluginRef="",n.plugin="",n.repo="",n.platforms=[],n.install="",n}();function y(n,i,r,e){return function(n,i,r){return void 0===r&&(r={}),function(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];return r.sync?v(n,i,e,r):r.observable?function X(n,i,r,e){return void 0===e&&(e={}),new H.y(function(o){var c;return c=e.destruct?v(n,i,r,e,function(){for(var a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];return o.next(a)},function(){for(var a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];return o.error(a)}):v(n,i,r,e,o.next.bind(o),o.error.bind(o)),c&&c.error&&(o.error(c.error),o.complete()),function(){try{if(e.clearFunction)return e.clearWithArgs?v(n,e.clearFunction,r,e,o.next.bind(o),o.error.bind(o)):v(n,e.clearFunction,[])}catch(a){console.warn("Unable to clear the previous observable watch for",n.constructor.getPluginName(),i),console.warn(a)}}})}(n,i,e,r):r.eventObservable&&r.event?function j(n,i){return i=typeof window<"u"&&i?U(window,i):i||(typeof window<"u"?window:{}),(0,Y.R)(i,n)}(r.event,r.element):r.otherPromise?function K(n,i,r,e){return void 0===e&&(e={}),w(function(o,c){var a=v(n,i,r,e);a?a.error?c(a.error):a.then&&a.then(o).catch(c):c({error:"unexpected_error"})})}(n,i,e,r):function V(n,i,r,e){void 0===e&&(e={});var o,c,a=w(function(l,s){o=e.destruct?v(n,i,r,e,function(){for(var u=[],d=0;d<arguments.length;d++)u[d]=arguments[d];return l(u)},function(){for(var u=[],d=0;d<arguments.length;d++)u[d]=arguments[d];return s(u)}):v(n,i,r,e,l,s),c=s});return o&&o.error&&(a.catch(function(){}),"function"==typeof c&&c(o.error)),a}(n,i,e,r)}}(n,i,r).apply(this,e)}!function G(){if(typeof process>"u"){var n=typeof window<"u"?window:{},r=Date.now(),e=!1;n.document.addEventListener("deviceready",function(){console.log("Ionic Native: deviceready event fired after "+(Date.now()-r)+" ms"),e=!0}),setTimeout(function(){!e&&n.cordova&&console.warn("Ionic Native: deviceready did not fire within 5000ms. This can happen when plugins are in an inconsistent state. Try removing plugins from plugins/ and reinstalling them.")},5e3)}}();var S=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return(0,C.ZT)(i,n),i.prototype.vibrate=function(r){return y(this,"vibrate",{sync:!0},arguments)},i.pluginName="Vibration",i.plugin="cordova-plugin-vibration",i.pluginRef="navigator",i.repo="https://github.com/apache/cordova-plugin-vibration",i.platforms=["Android","iOS","Windows"],i.decorators=[{type:t.GSi}],i}(k),ae=_(17911),ce=_(28615),Q=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return(0,C.ZT)(i,n),i.prototype.setBrightness=function(r){return y(this,"setBrightness",{},arguments)},i.prototype.getBrightness=function(){return y(this,"getBrightness",{},arguments)},i.prototype.setKeepScreenOn=function(r){return y(this,"setKeepScreenOn",{},arguments)},i.pluginName="Brightness",i.plugin="cordova-plugin-brightness",i.pluginRef="cordova.plugins.brightness",i.repo="https://github.com/mgcrea/cordova-plugin-brightness",i.platforms=["Android","iOS"],i.decorators=[{type:t.GSi}],i}(k);function se(n,i){1&n&&(t.ynx(0),t.TgZ(1,"div",4)(2,"p",5),t._uU(3,"Please login to continue"),t.qZA()(),t.BQk())}function le(n,i){if(1&n){const r=t.EpF();t.ynx(0),t.TgZ(1,"form",15),t.NdJ("ngSubmit",function(){t.CHM(r);const o=t.oxw(3);return t.KtG(o.lock_or_unlock())}),t._UZ(2,"ion-input",16),t.qZA(),t.BQk()}if(2&n){const r=t.oxw(3);t.xp6(1),t.Q6J("formGroup",r.myForm),t.xp6(1),t.s9C("errorText",r.qr_error)}}function ue(n,i){if(1&n&&(t.TgZ(0,"p",20),t._uU(1),t.qZA()),2&n){const r=t.oxw(4);t.xp6(1),t.hij("",r.qr_data_simplified," N")}}function de(n,i){if(1&n){const r=t.EpF();t.ynx(0),t.TgZ(1,"ion-button",17),t.NdJ("click",function(){t.CHM(r);const o=t.oxw(3);return t.KtG(o.openModal())}),t._UZ(2,"qrcode",18),t.qZA(),t.YNc(3,ue,2,1,"p",19),t.BQk()}if(2&n){const r=t.oxw(3);t.xp6(2),t.Q6J("qrdata",r.qr_data)("elementType","img")("width",r.imageHeight),t.xp6(1),t.Q6J("ngIf",r.qr_finalized)}}function ge(n,i){if(1&n){const r=t.EpF();t.ynx(0),t.TgZ(1,"ion-button",21),t.NdJ("click",function(){t.CHM(r);const o=t.oxw(3);return t.KtG(o.activate_receipt())}),t._UZ(2,"ion-icon",22),t.qZA(),t._UZ(3,"br"),t.TgZ(4,"span"),t._uU(5,"(right button) To display receipt when someone paid."),t.qZA(),t.BQk()}}function fe(n,i){if(1&n){const r=t.EpF();t.ynx(0),t.YNc(1,le,3,2,"ng-container",3)(2,de,4,4,"ng-container",3),t.TgZ(3,"ion-button",13),t.NdJ("click",function(){t.CHM(r);const o=t.oxw(2);return t.KtG(o.lock_or_unlock())}),t._UZ(4,"ion-icon",14),t.qZA(),t.YNc(5,ge,6,0,"ng-container",3),t.BQk()}if(2&n){const r=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!r.qr_finalized),t.xp6(1),t.Q6J("ngIf",r.qr_finalized),t.xp6(1),t.Q6J("color",r.lock_color),t.xp6(1),t.Q6J("name",r.lock_unlock_name),t.xp6(1),t.Q6J("ngIf",!r.receipt_activated)}}function _e(n,i){if(1&n&&(t.TgZ(0,"div",23)(1,"ion-card")(2,"ion-card-header")(3,"ion-card-title",24),t._uU(4,"Receipt"),t.qZA()(),t.TgZ(5,"ion-card-content")(6,"ion-grid")(7,"ion-row")(8,"ion-col",25),t._uU(9),t.qZA(),t.TgZ(10,"ion-col",26),t._UZ(11,"ion-icon",27),t.qZA(),t.TgZ(12,"ion-col",25),t._uU(13),t.qZA()(),t.TgZ(14,"ion-row")(15,"ion-col",25),t._uU(16),t.qZA(),t.TgZ(17,"ion-col",26),t._UZ(18,"ion-icon",27),t.qZA(),t.TgZ(19,"ion-col",25),t._uU(20),t.qZA()(),t.TgZ(21,"ion-row"),t._UZ(22,"ion-col",28),t.TgZ(23,"ion-col",29),t._uU(24),t.qZA(),t._UZ(25,"ion-col",28),t.qZA(),t._UZ(26,"hr"),t.TgZ(27,"ion-row")(28,"ion-col",30),t._uU(29,"Paid:"),t.qZA(),t.TgZ(30,"ion-col",31),t._uU(31),t.qZA()(),t.TgZ(32,"ion-row")(33,"ion-col",30),t._uU(34,"Refund:"),t.qZA(),t.TgZ(35,"ion-col",31),t._uU(36),t.qZA()()()()()()),2&n){const r=t.oxw(2);let e;t.xp6(9),t.Oqu(r.curr_receipt.from),t.xp6(4),t.Oqu(r.curr_receipt.to),t.xp6(3),t.Oqu(r.curr_receipt.total),t.xp6(4),t.Oqu(r.curr_receipt.final_total),t.xp6(4),t.Oqu(r.curr_receipt.charges),t.xp6(7),t.Oqu(r.curr_receipt.paid),t.xp6(5),t.Oqu(null!==(e=r.curr_receipt.refund)&&void 0!==e?e:"0 N")}}function me(n,i){if(1&n){const r=t.EpF();t.TgZ(0,"ion-button",32),t.NdJ("click",function(){t.CHM(r);const o=t.oxw(2);return t.KtG(o.clear_txhash())}),t._uU(1,"Dismiss"),t.qZA()}}function he(n,i){if(1&n){const r=t.EpF();t.TgZ(0,"div",23),t._UZ(1,"ion-icon",33),t.TgZ(2,"p",34),t._uU(3,"Timeout"),t.qZA(),t.TgZ(4,"ion-button",32),t.NdJ("click",function(){t.CHM(r);const o=t.oxw(2);return t.KtG(o.reset_timeout())}),t._uU(5,"Dismiss"),t.qZA()()}}function pe(n,i){if(1&n){const r=t.EpF();t.TgZ(0,"ion-toggle",36),t.NdJ("ionChange",function(){t.CHM(r);const o=t.oxw(3);return t.KtG(o.on_single_change())}),t._uU(1),t.qZA()}if(2&n){const r=t.oxw(3);t.Q6J("checked",r.is_single)("disabled",r.qr_finalized),t.xp6(1),t.hij(" ",r.is_single_name," ")}}function ve(n,i){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const r=t.oxw(3);t.xp6(1),t.Oqu(r.is_single_name)}}function be(n,i){if(1&n&&(t.ynx(0),t.YNc(1,pe,2,3,"ion-toggle",35)(2,ve,2,1,"span",3),t._UZ(3,"div",23),t.BQk()),2&n){const r=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!r.qr_finalized),t.xp6(1),t.Q6J("ngIf",r.qr_finalized)}}function we(n,i){if(1&n&&(t.ynx(0),t.TgZ(1,"div",6)(2,"h3",7),t._uU(3),t.qZA()(),t._UZ(4,"div",8),t.TgZ(5,"div",9),t.YNc(6,fe,6,5,"ng-container",3)(7,_e,37,7,"div",10)(8,me,2,0,"ion-button",11)(9,he,6,0,"div",10),t.qZA(),t.TgZ(10,"div",12),t.YNc(11,be,4,2,"ng-container",3),t.qZA(),t.BQk()),2&n){const r=t.oxw();t.xp6(3),t.hij(' Warning! Check payment destination: "',r.contract_id,'" '),t.xp6(3),t.Q6J("ngIf",!r.curr_receipt&&!r.timeout_page),t.xp6(1),t.Q6J("ngIf",r.curr_receipt),t.xp6(1),t.Q6J("ngIf",r.curr_receipt),t.xp6(1),t.Q6J("ngIf",r.timeout_page),t.xp6(2),t.Q6J("ngIf",r.receipt_activated)}}const ye=[{path:"",component:(()=>{var n;class i{constructor(e,o,c,a,l,s,u){this.fb=e,this.walletSvc=o,this.vibration=c,this.toastSvc=a,this.miscSvc=l,this.modalCtrl=s,this.brightness=u,this.qr_finalized=!1,this.min_val=.001,this.max_val=5e7,this.single_interval=1500,this.receipt_activated=!0,this.is_single=!0,this.receipt_updated=!1,this.timeout_count=0,this.threshold_timeout=Math.round(200),this.timeout_page=!1}ngOnInit(){this.myForm=this.fb.group({price:[,[m.kI.required,m.kI.min(this.min_val),m.kI.max(this.max_val),m.kI.pattern("^[0-9]+(.[0-9]{0,5})?$")]]}),this.source=function N(n=0,i=L.z){return n<0&&(n=0),(0,J.H)(n,n,i)}(this.single_interval),setTimeout(()=>this.refresh_fn(),1e3)}ngOnDestroy(){this.subscription.unsubscribe()}handle_refresh(e){var o=this;return(0,b.Z)(function*(){o.refresh_fn(),e.target.complete()})()}refresh_fn(){var e=this;return(0,b.Z)(function*(){null!=e.walletSvc.account_id?e.walletSvc.view("receipt_activated",{account:e.walletSvc.account_id}).then(o=>{e.receipt_activated=o}).catch(o=>{e.receipt_activated=!1,console.error(o)}):e.receipt_activated=!1})()}get account_id(){var e;return null!==(e=this.walletSvc.account_id)&&void 0!==e?e:""}get contract_id(){return this.walletSvc.contract_id}get qr_data(){return`${this.account_id} ${this.myForm.get("price").value.toString()}`}get qr_data_simplified(){return`${this.miscSvc.alter_name(this.account_id)} ${this.myForm.get("price").value.toString()}`}get qr_error(){var e,o=null!==(e=this.myForm.get("price").errors)&&void 0!==e?e:{};return o.pattern?"Max 5 decimal place, numbers only.":o.min?`Minimum ${this.min_val} per transaction.`:o.max?`Maximum ${this.max_val} per transaction.`:null}get errors(){return this.myForm.get("price").errors}lock_or_unlock(){return this.errors?(this.myForm.get("price").markAsDirty(),this.toastSvc.present_toast(this.errors.required?"Please input price":`Error: ${this.qr_error}`,"top","bg-danger"),null):this.qr_finalized?this.unlock_price():this.lock_price()}get lock_unlock_name(){return this.qr_finalized?"lock-open-outline":"lock-closed-outline"}get lock_color(){return this.qr_finalized?"medium":"primary"}lock_price(){this.qr_finalized=!0,this.myForm.get("price").disable(),this.is_single&&(this.receipt_updated=!1,this.detect_receipt(),this.set_old_receipt())}unlock_price(){this.vibration.vibrate([300,500,800]),this.qr_finalized=!1,this.myForm.get("price").enable(),this.is_single&&this.stop_detect_receipt()}activate_receipt(){var e;this.walletSvc.call("activate_receipt",{},null!==(e=E.utils.format.parseNearAmount("0.1"))&&void 0!==e?e:"0")}get is_single_name(){return this.is_single?"Only one payment":"Accept multiple payments"}on_single_change(){this.is_single=!this.is_single}detect_receipt(){this.subscription=this.source.subscribe(e=>this._receipt_changed())}stop_detect_receipt(){this.old_receipt=null,this.receipt_updated=!1,this.timeout_count=0,this.subscription.unsubscribe()}clear_txhash(){this.unlock_price(),this.curr_receipt=null}_receipt_changed(){var e=this;return(0,b.Z)(function*(){if(""===e.account_id)return e.toastSvc.present_toast("wallet account_id is invalid. Please login and wait 3 seconds.","top","bg-danger"),void e.stop_detect_receipt();let o=yield e.walletSvc.view("latest_transaction",{account:e.account_id});e.compare_receipt(e.old_receipt,o)||(e.curr_receipt=o,e.miscSvc.mod_receipt(e.curr_receipt),e.receipt_updated=!0,e.stop_detect_receipt()),e.timeout_count+=1,e.timeout_count>e.threshold_timeout&&e.reset_if_no_pay()})()}compare_receipt(e,o){return e.datetime==o.datetime}set_old_receipt(){var e=this;return(0,b.Z)(function*(){""!==e.account_id?e.old_receipt=yield e.walletSvc.view("latest_transaction",{account:e.account_id}):e.toastSvc.present_toast("wallet account_id is invalid. Please login and wait 3 seconds.","top","bg-danger")})()}reset_if_no_pay(){this.stop_detect_receipt(),this.timeout_page=!0}reset_timeout(){this.timeout_page=!1,this.curr_receipt=null,this.unlock_price()}get imageHeight(){var e,o,c,a,l=null!==(e=null===(o=document.getElementById("container-center"))||void 0===o?void 0:o.offsetTop)&&void 0!==e?e:0,s=null!==(c=null===(a=document.getElementById("container-bottom"))||void 0===a?void 0:a.offsetTop)&&void 0!==c?c:300;return Math.round(.9*s)-l}openModal(){var e=this;return(0,b.Z)(function*(){const o=yield e.modalCtrl.create({component:$,componentProps:{qr_data:e.qr_data}});o.present();const c=yield e.brightness.getBrightness();e.brightness.setBrightness(1),o.onDidDismiss().then(()=>{c>=0&&c<=1?e.brightness.setBrightness(c):e.toastSvc.present_toast(`Get original brightness failed: ${c}`,"top","bg-danger",5e3)},a=>{e.toastSvc.present_toast(`Please report error: "qrcode modal dismiss: ${a}"`,"top","bg-danger",5e3)})})()}}return(n=i).\u0275fac=function(e){return new(e||n)(t.Y36(m.qu),t.Y36(D.g),t.Y36(S),t.Y36(ae.k),t.Y36(ce.Y),t.Y36(f.IN),t.Y36(Q))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-tab1"]],decls:7,vars:3,consts:[[1,"ion-no-border"],[3,"fullscreen"],["slot","fixed",3,"ionRefresh"],[4,"ngIf"],[1,"container-center"],[1,"display-6"],[1,"bg-danger"],[1,"text-center","text-light"],["id","container-top"],["id","container-center",1,"container-center"],["class","pt-3",4,"ngIf"],["size","large","color","medium",3,"click",4,"ngIf"],["id","container-bottom",1,"container-bottom"],["size","large",3,"color","click"],[3,"name"],["novalidate","","autocomplete","off",3,"formGroup","ngSubmit"],["fill","outline","label","","formControlName","price","placeholder","0","type","number",1,"custom",3,"errorText"],["fill","clear",1,"custom",3,"click"],[3,"qrdata","elementType","width"],["class","text-center display-4",4,"ngIf"],[1,"text-center","display-4"],["size","large","color","secondary",3,"click"],["name","receipt-outline"],[1,"pt-3"],[1,"text-center"],["size","5",1,"fs-16","text-center"],["size","2",1,"fs-16","text-center"],["name","arrow-forward-outline"],["size","4"],["size","4",1,"fs-16","text-center"],["size","3",1,"fs-16","text-end"],["size","auto",1,"fs-16"],["size","large","color","medium",3,"click"],["name","hourglass-outline","aria-hidden","true",1,"timeout-icon"],[1,"display-3"],[3,"checked","disabled","ionChange",4,"ngIf"],[3,"checked","disabled","ionChange"]],template:function(e,o){1&e&&(t.TgZ(0,"ion-header",0),t._UZ(1,"ion-toolbar"),t.qZA(),t.TgZ(2,"ion-content",1)(3,"ion-refresher",2),t.NdJ("ionRefresh",function(a){return o.handle_refresh(a)}),t._UZ(4,"ion-refresher-content"),t.qZA(),t.YNc(5,se,4,0,"ng-container",3)(6,we,12,6,"ng-container",3),t.qZA()),2&e&&(t.xp6(2),t.Q6J("fullscreen",!0),t.xp6(3),t.Q6J("ngIf",0===o.account_id.trim().length),t.xp6(1),t.Q6J("ngIf",0!==o.account_id.trim().length))},dependencies:[f.YG,f.PM,f.FN,f.Zi,f.Dq,f.wI,f.W2,f.jY,f.Gu,f.gu,f.pK,f.nJ,f.Wo,f.Nd,f.ho,f.sr,f.w,f.as,P.O5,m._Y,m.JJ,m.JL,m.sg,m.u,q],styles:["ion-input.custom[_ngcontent-%COMP%]{--padding-bottom: .7em;--padding-end: .4em;--padding-top: .7em;--border-width: 0em !important;font-size:4em;--placeholder-color: #c8c8c8 !important}.timeout-icon[_ngcontent-%COMP%]{font-size:18vmin;color:#d84747}ion-button.custom[_ngcontent-%COMP%]{--background-hover: white !important}"]}),i})()}];let xe=(()=>{var n;class i{}return(n=i).\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[Z.Bz.forChild(ye),Z.Bz]}),i})(),Te=(()=>{var n;class i{}return(n=i).\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[S,Q],imports:[f.Pc,P.ez,m.u5,m.UX,M.e,xe,B]}),i})()}}]);